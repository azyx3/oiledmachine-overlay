--- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c.orig	2019-05-24 16:01:19.696532239 -0700
+++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c	2019-05-24 16:02:14.748668130 -0700
@@ -5811,7 +5811,6 @@ static void amdgpu_dm_atomic_commit_tail
 		}
 	}
 
-	/* Handle scaling, underscan, and abm changes*/
 #if DRM_VERSION_CODE < DRM_VERSION(4, 12, 0)
 	for_each_connector_in_state(state, connector, old_con_state, i) {
 		new_con_state = connector->state;
@@ -5826,6 +5825,8 @@ static void amdgpu_dm_atomic_commit_tail
 		struct dm_connector_state *dm_new_con_state = to_dm_connector_state(new_con_state);
 		struct dm_connector_state *dm_old_con_state = to_dm_connector_state(old_con_state);
 		struct amdgpu_crtc *acrtc = to_amdgpu_crtc(dm_new_con_state->base.crtc);
+		struct dc_surface_update dummy_updates[MAX_SURFACES] = { 0 };
+		struct dc_stream_update stream_update = { 0 };
 		struct dc_stream_status *status = NULL;
 
 		if (acrtc){
